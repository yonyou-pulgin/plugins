{"version":3,"file":"static/js/641.bf82894f.js","mappings":"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","sources":["webpack://plugins/./node_modules/.pnpm/mitt@3.0.1/node_modules/mitt/dist/mitt.mjs","webpack://plugins/./src/eventBus/bus.js","webpack://plugins/./src/hooks/useConfirmInfo.js","webpack://plugins/./node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.8+webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js","webpack://plugins/./src/antDesignComponents/yyButton/yy-button.vue","webpack://plugins/./src/antDesignComponents/yyButton/yy-button.vue?f0da","webpack://plugins/./src/views/fromSuccess.vue","webpack://plugins/./src/views/fromSuccess.vue?ff95"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\n\nconst eventBus = mitt()\n\nexport default eventBus","import { ref, onMounted } from 'vue'\nimport { bitable } from '@lark-base-open/js-sdk';\n\n\nconst bridge = bitable.bridge;\nconst formData = ref({\n  isVerifyIdentity: true\n})\n\n// 获取缓存的表单数据\nconst getCacheFormData = async () => {\n  const data = await bridge.getData('yy-form-data')\n  if(data && Object.values(data).length && data !=1){\n    formData.value = Object.assign(formData.value, JSON.parse(data))\n    return Promise.resolve(formData.value)\n  }\n  return Promise.resolve(null)\n}\n// 获取缓存授权码\nconst getCacheAuthCode = async () => {\n  const data = await bridge.getData('yy-auth-code')\n  //  有数据返回string 没有数据返回 {}\n  if(data && Object.values(data).length){\n    return Promise.resolve(data)\n  }\n  return Promise.resolve(null)\n}\n// 确认信息\nconst confrimInfo = ref({})\n\nconst setFormData = async (val) => {\n  if(val && typeof val == 'object' ){\n    formData.value = Object.assign(formData.value, val)\n    // 清空授权码\n    await bridge.setData('yy-form-data', JSON.stringify(formData.value))\n    // 记录当前的baseId的授权码\n    if(formData.value.isNewRecordConfirm && formData.value.personalBaseToken){\n      await bridge.setData('yy-auth-code', formData.value.personalBaseToken)\n      await bridge.setData('yy-baseId', formData.value.baseId)\n    }\n  }\n}\nconst getFormData = () => {\n  return formData.value\n}\nconst resetFormData = async() => {\n  formData.value = {}\n  await bridge.setData('yy-form-data', 1)\n}\nconst setConfrimInfo = (info) => {\n  confrimInfo.value = info\n}\nconst getConfrimInfo = () => {\n  return confrimInfo.value\n}\n\n\n\nconst useConfirmInfo = () => {\n  onMounted(async() => {\n    const cacheBaseId = await bridge.getData('yy-baseId')\n    const { baseId:currentBaseId } =  await bitable.base.getSelection()\n    if(cacheBaseId && typeof cacheBaseId == 'string' && cacheBaseId != currentBaseId) {\n      await bridge.setData('yy-auth-code', {})\n      formData.value.personalBaseToken = ''\n    }\n  })\n  return {\n    formData,\n    confrimInfo,\n    setConfrimInfo,\n    getConfrimInfo,\n    setFormData,\n    getFormData,\n    getCacheFormData,\n    getCacheAuthCode,\n    resetFormData,\n  }\n}\nexport default useConfirmInfo","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\n  <a-button\n    class=\"yy-custom-btn yy-button\"\n    :class=\"customClass\"\n    v-bind=\"$attrs\"\n  >\n    <template #icon>\n      <slot name=\"prefixIcon\"></slot>\n    </template>\n    <slot>{{props.loadingText}}</slot>\n    <slot name=\"suffixIcon\"></slot>\n  </a-button>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\ndefineOptions({\n  name: 'custom-button',\n  inheritAttrs: true,\n})\nconst props = defineProps({\n  customClass: { // 自定义类名\n    type: String,\n    default: '',\n  },\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n.yy-custom-btn{\n  height: 32px;\n  border-radius: 6px;\n  width: min-content;\n  cursor: pointer;\n  box-shadow: none !important;\n  font-size: 14px;\n  padding: 0 12px;\n  min-width: 80px;\n  &.ant-btn-primary[disabled]{\n    background: #9CBAFF;\n    color: #FFFFFF;\n    border: none;\n  }\n}\n.yy-button + .yy-button{\n  margin-left: 12px;\n}\n\n:global(.ant-wave){\n  display: none!important;\n}\n// ui 操作按钮默认灰色， active 蓝色的样式\n.yy-custom-btn-operate{\n  color: #606266!important;\n  &:hover{\n    border-color: #3A75FF!important;\n    background: #fff!important;\n    color: #3A75FF!important;\n  }\n}\n.yy-custom-btn-operate:disabled{\n  border-color: #D6DAE4!important;\n  color: #BCC2CC!important;\n  background: #F2F4F7!important;\n}\n</style>\n","import script from \"./yy-button.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./yy-button.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./yy-button.vue?vue&type=style&index=0&id=48a2a1a8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.8+webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-48a2a1a8\"]])\n\nexport default __exports__","<template>\n    <div class=\"success\" :class=\"{'success-isVerifyIdentity': !confrimInfo.isVerifyIdentity}\">\n      <div class=\"success-head\">\n        <img src=\"@/assets/img/success.png\" width=\"16px\" alt=\"\">\n      创建完成</div>\n      <div class=\"success-desc\" v-if=\"confrimInfo.isVerifyIdentity\">您当前创建的是「有校验身份」确认表\n        <br/>\n        请将二维码/链接发给对方进行签字确认</div>\n      <div class=\"success-desc\" v-else>您当前创建的是「无校验身份」确认表<br/>\n       可以直接打开数据表中链接进行签字确认</div>\n      <div class=\"success-qr\" v-if=\"qrUrl && confrimInfo.isVerifyIdentity\">\n        <img :src=\"qrUrl\" alt=\"\" width=\"280px\">\n      </div>\n    </div>\n</template>\n\n<script setup>\nimport { ref,onMounted, onBeforeMount, onBeforeUnmount } from 'vue';\nimport bus from '@/eventBus/bus.js'\nimport yyButton from '@/antDesignComponents/yyButton/yy-button.vue'\nimport useConfirmInfo from '../hooks/useConfirmInfo';\nimport { bitable } from '@lark-base-open/js-sdk';\nimport { message } from 'ant-design-vue';\n\nconst { formData, confrimInfo } = useConfirmInfo()\n\nconst qrUrl = ref(null)\nonMounted(() => {\n  if(confrimInfo.value){\n    qrUrl.value = confrimInfo.value.qrUrl\n  }\n})\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.success{\n  max-width: 375px;\n  margin: 0 auto;\n  &-head{\n    font-weight: 600;\n    font-size: 16px;\n    color: #1F2329;\n    line-height: 22px;\n    text-align: left;\n    font-style: normal;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 16px;\n    img{\n      margin-right: 6px;\n    }\n  }\n\n  &-desc{\n    margin-top: 8px;\n    text-align: center;\n    font-size: 14px;\n    color: #333333;\n    line-height: 20px;\n    font-style: normal;\n    margin-bottom: 24px;\n  }\n\n  &-qr{\n    width: 280px;\n    height: auto;\n    background: #FFFFFF;\n    border-radius: 6px;\n    border: 1px solid #E4E7ED;\n    margin: 0 auto;\n    overflow: hidden;\n    img{\n      width: 278px;\n    }\n  }\n\n  &-btn{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 24px;\n\n    .ant-button{\n      height: 32px!important;\n    }\n  }\n}\n\n.success-isVerifyIdentity{\n  padding-top: 54px;\n}\n</style>","import script from \"./fromSuccess.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./fromSuccess.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./fromSuccess.vue?vue&type=style&index=0&id=21545fc7&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.8+webpack@5.94.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-21545fc7\"]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","eventBus","mitt","bridge","bitable","formData","ref","isVerifyIdentity","getCacheFormData","async","data","getData","Object","values","length","value","assign","JSON","parse","Promise","resolve","getCacheAuthCode","confrimInfo","setFormData","val","setData","stringify","isNewRecordConfirm","personalBaseToken","baseId","getFormData","resetFormData","setConfrimInfo","info","getConfrimInfo","useConfirmInfo","onMounted","cacheBaseId","currentBaseId","base","getSelection","exports","sfc","props","target","__vccOpts","key","__props","__exports__","qrUrl"],"sourceRoot":""}